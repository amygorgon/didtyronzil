<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="Tralcan X">
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>INIT.tyron - tyronzil</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../../css/theme.css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "INIT.tyron";
    var mkdocs_page_input_path = "smart-contracts/INIT.tyron.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> tyronzil</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../..">Welcome</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../W3C-dids/">W3C DIDs terminology</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">DID Method</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="#">Scheme</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../scheme/did-scheme/">DID Scheme</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../scheme/did-url-syntax/">DID-URL syntax</a>
                </li>
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../did-document/">DID Document</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="#">CRUD operations</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../CRUD-operations/did-create/">Create</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../CRUD-operations/did-resolve/">Resolve</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../CRUD-operations/did-recover/">Recover</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../CRUD-operations/did-update/">Update</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../CRUD-operations/did-deactivate/">Deactivate</a>
                </li>
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../security-privacy/">Security & privacy</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../protocol-parameters/">Parameters</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../implementation/models/">Models</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Smart contracts</span></p>
                <ul class="current">
                    <li class="toctree-l1"><a class="reference internal" href="../DID.tyron/">DID.tyron</a>
                    </li>
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">INIT.tyron</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#immutable-fields">Immutable fields</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#mutable-fields">Mutable fields</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#procedures">Procedures</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#transitions">Transitions</a>
    </li>
    </ul>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Implementation</span></p>
                <ul>
                    <li class="toctree-l1"><a class="" href="https://github.com/tralcanx/tyronzil">Client</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="https://github.com/pungtas/tyron.js">Library</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="https://github.com/pungtas/tyron-react-native">DID Browser</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../roadmap/">Development</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">tyronzil</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Smart contracts &raquo;</li>
        
      
    
    <li>INIT.tyron</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/julio-cabdu/didtyronZIL/edit/master/docs/smart-contracts/INIT.tyron.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="inittyron-ssi-initialization-domain-name-system-smart-contract">INIT.tyron: SSI Initialization &amp; Domain Name System smart contract</h1>
<p>Self-sovereign identity (SSI) focuses on principle #7 of Privacy by Design: "Respect for user privacy â€” keep it user-centric". In that spirit, the user is the owner of their DID smart contract and MUST be the caller to every <a href="../DID.tyron/#transitions">transition</a> that affects the DID State.</p>
<blockquote>
<p>Find the <a href="https://github.com/pungtas/tyron.js/blob/master/lib/blockchain/smart-contracts/zilliqa/init.tyron.scilla">INIT.tyron's code</a> on GitHub.</p>
</blockquote>
<h2 id="immutable-fields">Immutable fields</h2>
<p>Immutable fields are set at deployment and can not get modified. The DID smart contract gets deployed with the following immutable fields:</p>
<ol>
<li><em>initFoundationAddress</em>: The Zilliqa adddress of the Tyron Pungtas Foundation, the owner of the INIT.tyron contract | [ByStr20 type]</li>
</ol>
<h2 id="mutable-fields">Mutable fields</h2>
<p>Mutable fields can get modified but only if there is a specific code in the contract that allows it. They MUST get initialized with a value at deployment.</p>
<ol>
<li><em>foundation_addr</em>: The Zilliqa address of the Tyron Pungtas Foundation that can get updated by the <em>UpdateOwner</em> transition | [ByStr20 type]</li>
<li><em>didc_code</em>: The init.tyron stores the DID-smart-contract code by version. This way, the agents can download the code by version directly from the Zilliqa blockchain | @key: version | @value: hex-encoded code | [Map String String type]</li>
<li><em>operation_cost</em>: The cost of a tyronzil transaction | @key: domain OR contract.tyron | @value: cost as % of the amount | [Map String Uint128 type]</li>
<li><em>agent_commission</em>: The agent's commission as a % of share (the user has 51% of the share, Tyron Pungtas Foundation 51% of the remaining 49%, and the agent earns the rest and can offer promotions) | @key: avatar.agent | @value: max 24% | [Map String Uint128 type]</li>
<li><em>dns</em>: The address of a user's DID smart contract gets stored in the DNS records map field defined as follows:</li>
</ol>
<pre><code>   @key: SsiDomain (e.g. &quot;.did&quot;, &quot;.tyron&quot;, &quot;.agent&quot;)
   @value: Map of
            @key: avatar
            @value: address *)
  field dns: Map String (Map String ByStr20) = Emp String (Map String ByStr20)
</code></pre>
<ol>
<li><em>ssi_tokens</em>: The proxy addresses of the SSI Tokens | @key: token | @value: proxy address | [Map String ByStr20 type]</li>
<li><em>ssi_token_implementations</em>: The addresses of the SSI Token implementations | @key: proxy address | @value: implementation address | [Map ByStr20 ByStr20 type]</li>
</ol>
<h2 id="procedures">Procedures</h2>
<p>Procedures can change the state of the contract (mutable fields), but they are not part of the public API which means that they can only get invoked from within the contract itself.</p>
<ol>
<li><em>ThrowError</em>: The procedure to throw an error.</li>
<li><em>Payment</em>: Executes the payment to the foundation.</li>
<li><em>IsRightCaller</em>: Validates the _sender.</li>
</ol>
<h2 id="transitions">Transitions</h2>
<p>Transitions are the public API and get invoked by sending messages to the contract.  </p>
<ol>
<li><em>UpdateOwner</em>: Updates the Zilliqa address of the Tyron Pungtas Foundation.</li>
<li><em>SetDidCode</em>: Saves the DID-smart-contract code by version.</li>
<li><em>OperationCost</em>: Sets the <em>operation_cost</em> by SSI domain (domain name or donation campaign code).</li>
<li><em>AgentCommission</em>: Sets the <em>agent_commission</em> by domain name.agent of type String.</li>
<li><em>Init</em>: Called by a DID smart contract to set the .did operation cost, foundation address &amp; agent's account.</li>
<li><em>SetSsiDomain</em>: Sets a Self-Sovereign Identity domain name in the DNS records.</li>
<li><em>SetSsiToken</em>: Sets the token name, proxy address and implementation address of a SSI Token.</li>
<li><em>SsiToken</em>: Called by a DID contract to initialize a SSI Token in its state.</li>
<li><em>Donate</em>: Called by a DID contract to initialize a donation campaign code in its state.</li>
<li><em>DeleteCampaign</em>: Removes a donation campaign code from the <em>operation_cost</em> map field.</li>
</ol>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../roadmap/" class="btn btn-neutral float-right" title="Development">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../DID.tyron/" class="btn btn-neutral" title="DID.tyron"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>Copyright (C) 2021 Tyron Pungtas</p>
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/julio-cabdu/didtyronZIL/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../DID.tyron/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../../roadmap/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
