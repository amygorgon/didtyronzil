
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="An open-source W3C DID-Method powered by Zilliqa">
      
      
      
        <meta name="author" content="Julio Cabrapan Duarte">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-6.0.2">
    
    
      
        <title>didc.tyron - tyron</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.38780c08.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.3f72e892.min.css">
        
          
          
          <meta name="theme-color" content="#009485">
        
      
    
    
    
      
        
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:300,400,400i,700%7CUbuntu+Mono&display=fallback">
        <style>body,input{font-family:"Ubuntu",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Ubuntu Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="teal" data-md-color-accent="teal">
      
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#didctyron-the-decentralized-identifier-smart-contract" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../.." title="tyron" class="md-header-nav__button md-logo" aria-label="tyron">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            tyron
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              didc.tyron
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/julio-cabdu/didtyronZIL/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="tyron" class="md-nav__button md-logo" aria-label="tyron">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    tyron
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/julio-cabdu/didtyronZIL/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../W3C-dids/" class="md-nav__link">
      W3C DIDs
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      DID-Method
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="DID-Method" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        <span class="md-nav__icon md-icon"></span>
        DID-Method
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3-1" type="checkbox" id="nav-3-1">
    
    <label class="md-nav__link" for="nav-3-1">
      Scheme
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Scheme" data-md-level="2">
      <label class="md-nav__title" for="nav-3-1">
        <span class="md-nav__icon md-icon"></span>
        Scheme
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../scheme/did-scheme/" class="md-nav__link">
      DID-Scheme
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../scheme/did-url-syntax/" class="md-nav__link">
      DID-URL syntax
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../did-document/" class="md-nav__link">
      DID-Document
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3-3" type="checkbox" id="nav-3-3">
    
    <label class="md-nav__link" for="nav-3-3">
      CRUD Operations
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="CRUD Operations" data-md-level="2">
      <label class="md-nav__title" for="nav-3-3">
        <span class="md-nav__icon md-icon"></span>
        CRUD Operations
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../CRUD-operations/did-create/" class="md-nav__link">
      DID-Create
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../CRUD-operations/did-resolve/" class="md-nav__link">
      DID-Resolve
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../CRUD-operations/did-recover/" class="md-nav__link">
      DID-Recover
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../CRUD-operations/did-update/" class="md-nav__link">
      DID-Update
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../CRUD-operations/did-deactivate/" class="md-nav__link">
      DID-Deactivate
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../security-privacy/" class="md-nav__link">
      Security & privacy
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" checked>
    
    <label class="md-nav__link" for="nav-4">
      Tyron DID Protocol
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Tyron DID Protocol" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        <span class="md-nav__icon md-icon"></span>
        Tyron DID Protocol
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../protocol-parameters/" class="md-nav__link">
      Protocol parameters
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4-2" type="checkbox" id="nav-4-2" checked>
    
    <label class="md-nav__link" for="nav-4-2">
      Smart contracts
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Smart contracts" data-md-level="2">
      <label class="md-nav__title" for="nav-4-2">
        <span class="md-nav__icon md-icon"></span>
        Smart contracts
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        didc.tyron
        <span class="md-nav__icon md-icon"></span>
      </label>
    
    <a href="./" class="md-nav__link md-nav__link--active">
      didc.tyron
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#immutable-fields" class="md-nav__link">
    Immutable fields
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mutable-fields" class="md-nav__link">
    Mutable fields
  </a>
  
    <nav class="md-nav" aria-label="Mutable fields">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-xwallet-fields" class="md-nav__link">
    The xWallet fields
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#procedures" class="md-nav__link">
    Procedures
  </a>
  
    <nav class="md-nav" aria-label="Procedures">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-xwallet-procedure" class="md-nav__link">
    The xWallet procedure
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#transitions" class="md-nav__link">
    Transitions
  </a>
  
    <nav class="md-nav" aria-label="Transitions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-xwallet-transitions" class="md-nav__link">
    The xWallet transitions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../init.tyron/" class="md-nav__link">
      init.tyron
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Implementation
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Implementation" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        <span class="md-nav__icon md-icon"></span>
        Implementation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="https://github.com/julio-cabdu/tyronzil-js" class="md-nav__link">
      DID-Client
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../implementation/models/" class="md-nav__link">
      Models
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../roadmap/" class="md-nav__link">
      Development
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#immutable-fields" class="md-nav__link">
    Immutable fields
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mutable-fields" class="md-nav__link">
    Mutable fields
  </a>
  
    <nav class="md-nav" aria-label="Mutable fields">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-xwallet-fields" class="md-nav__link">
    The xWallet fields
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#procedures" class="md-nav__link">
    Procedures
  </a>
  
    <nav class="md-nav" aria-label="Procedures">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-xwallet-procedure" class="md-nav__link">
    The xWallet procedure
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#transitions" class="md-nav__link">
    Transitions
  </a>
  
    <nav class="md-nav" aria-label="Transitions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-xwallet-transitions" class="md-nav__link">
    The xWallet transitions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/julio-cabdu/didtyronZIL/edit/master/docs/smart-contracts/didc.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="didctyron-the-decentralized-identifier-smart-contract">didc.tyron: The Decentralized Identifier Smart Contract</h1>
<p>The user's DID smart contract (DIDC) gets instantiated from a template that is stored on-chain in the <a href="../init.tyron/">init.tyron</a> smart contract. For that, the user MUST give their Zilliqa address as the <em>contract owner</em>. Once the DIDC gets deployed, its code is immutable (the code can never get modified under the same contract's address). However, the DIDC has mutable fields declared in its code, and there are predetermined ways, called transitions, that can modify those fields in specific manners.</p>
<blockquote>
<p>Find the <a href="https://github.com/julio-cabdu/tyronZIL-js/blob/master/src/lib/blockchain/smart-contracts/didc.scilla">DIDC's code</a> on GitHub.</p>
</blockquote>
<h2 id="immutable-fields">Immutable fields</h2>
<p>Immutable fields are set at deployment and can not get modified. The DIDC gets deployed with the following immutable fields:</p>
<ol>
<li><em>initContractOwner</em>: The Zilliqa address of the user who is the owner of the contract | [ByStr20 type]</li>
<li><em>initTyron</em>: The Zilliqa address of the <a href="../init.tyron/">init.tyron</a> smart contract | [ByStr20 type]</li>
</ol>
<h2 id="mutable-fields">Mutable fields</h2>
<p>Mutable fields can get modified but only if there is a specific code in the contract that allows it. They MUST get initialized with a value at deployment.</p>
<ol>
<li><em>contract_owner</em>: The Zilliqa address of the user that can get updated by the <em>UpdateOwner</em> transition | [ByStr20 type]</li>
<li><em>decentralized_identifier</em>: The user's DID generated according to the <a href="../../scheme/did-scheme/">DID-Scheme</a> - [String type].</li>
<li><em>init_tyron</em>: The address of the <a href="../init.tyron/">init.tyron</a> contract's latest implementation | [ByStr20 type]</li>
<li><em>resource_records</em>: The Decentralized Identifier's DNS resource records | @key: domain | @value: avatar | [Map String String type]</li>
<li><em>did_agents</em>: The user's SSI agents | @key: avatar.agent | @value: agent's address | [Map String ByStr20 type]</li>
<li><em>latest_agent</em>: The Zilliqa address of the current agent | [ByStr20 type]</li>
<li><em>did_status</em>: The DID-Status can be <em>Undefined</em>, <em>Initialized</em>, <em>Created</em>, <em>Updated</em>, <em>Recovered</em> or <em>Deactivated</em> | [DidStatus ADT type]</li>
<li><em>verification_methods</em>: The Tyron verification methods are the public keys used by the DIDC | @key: key purpose | @value: public key of type "SchnorrSecP256k1VerificationKey2019" | [Map String ByStr33 type]</li>
<li><em>services</em>: The DID service endpoints | @key: ID | @value: service type &amp; URI | [Map String Pair String String type]</li>
<li><em>tyron_hash</em>: The SHA256 hash of the DID. It is necessary to sign this hash to perform certain operations, such as deactivation of the DID | [ByStr type]</li>
<li><em>did_update_key</em> &amp; <em>did_recovery_key</em>: The public <a href="../../protocol-parameters/#did-keys">DID-Keys</a> to enable future operations are stored in the DIDC to execute the <em>IsRightSignature</em> procedure - [ByStr type]</li>
<li><em>created</em>: The block number when the DID-Create tyronZIL transaction occurred | [BNum type]</li>
<li><em>ledger_time</em>: The block number when the last tyronZIL transaction occurred | [BNum type]</li>
<li>
<p><em>transaction_number</em>: A monotonically increasing number representing the amount of tyronZIL transactions that have taken place | [Uint128 type]</p>
<p>The following fields get determined by calling the <em>Init</em> transition which sends a message to the <a href="../init.tyron/">init.tyron</a> contract that, in return, call the <em>InitCallBack</em> transition:</p>
</li>
<li>
<p><em>operation_cost</em>: The cost of each tyronZIL transaction type, e.g. ".did" for DID operations | [Map String Uint128 type] </p>
</li>
<li><em>foundation_address</em>: The address of the Tyron Pungtas Foundation | [ByStr20 type]</li>
<li><em>agent_comission</em>: The agent's comission as a % of the <em>operation_cost</em> | @key: avatar.agent | @value: comission | [Map String Uint 128 type]</li>
<li><em>latest_comission</em>: It corresponds to the commission of the current agent | [Uint128 type] </li>
</ol>
<h3 id="the-xwallet-fields">The xWallet fields</h3>
<ol>
<li><em>xWallet</em>: The SSI Token implementations | @key: token address | @value: token name | [Map ByStr20 String type]</li>
<li><em>xBalances</em>: The SSI Token balances | @key: token name | @value: balance | [Map String Uint128 type]</li>
<li><em>xProxies</em>: The SSI Token proxies | @key: token name | @value: proxy address | [Map String ByStr20 type]</li>
<li><em>donation</em>: The Donation Scheme | @key: campaign name | @value: campaign's starting blok number | [Map String BNum]</li>
</ol>
<h2 id="procedures">Procedures</h2>
<p>Procedures can change the state of the contract (mutable fields), but they are not part of the public API which means that they can only get invoked from within the contract itself.</p>
<ol>
<li><em>DidScheme</em>: It generates the user's <em>decentralized_identifier</em> &amp; <em>tyron_hash</em>. This procedure is the only way to generate the Decentralized Identifier, and it can only get executed by the <em>DidCreate</em> transition.</li>
<li><em>ThrowError</em>: The procedure to throw an error.</li>
<li><em>IsRightCaller</em>: Validates that the order comes from a SSI Trinity entity. This procedure matches against a <em>SsiTrinity</em> ADT: user (to validate that the call comes from the user/ contract owner address), agent (to verify the agent in the Payment procedure) or tyron (to validate that the call comes from the <a href="../init.tyron/">init.tyron</a> contract.</li>
<li><em>IsRightStatus</em>: Verifies that the DID-Status is correct for the given operation.</li>
<li><em>Donation</em>: Checks that the donation campaign code is within the limitation period of 1-week.</li>
<li><em>Payment</em>: Executes the payment to the agents and foundation.</li>
<li><em>IsRightSignature</em>: Verifies the Schnorr signature that comes with the signed data corresponds with the public DID-Keys stored in the contract.</li>
<li><em>UpdateDocument</em>: Updates the verification methods and services map fields.</li>
<li><em>IsValidKey</em>: Verifies that the new DID-Key is unique and not utilized more than once.</li>
<li><em>Timestamp</em>: Generates a timestamp that sets the <em>ledger_time</em> &amp; <em>transaction_number</em>.</li>
</ol>
<h3 id="the-xwallet-procedure">The xWallet procedure</h3>
<ol>
<li><em>XWallet</em>: Verifies the validity, checks &amp; updates the balance of the SSI Tokens</li>
</ol>
<h2 id="transitions">Transitions</h2>
<p>Transitions are the public API of the DIDC and get invoked by sending messages to the contract.  </p>
<ol>
<li><em>UpdateOwner</em>: Updates the Zilliqa address of the user aka contract owner.</li>
<li><em>UpdateInit</em>: Updates the <a href="../init.tyron/">init.tyron</a> contract to the address of its latest implementation - only the user can execute this transition.</li>
<li><em>Init</em>: Sets the agent's info into the user's DIDC &amp; sends a message to the <a href="../init.tyron/">init.tyron</a> contract that, in return, calls the <em>InitCallBack</em> transition. It also sets the <em>did_status</em> to Initialized.</li>
<li><em>InitCallBack</em>: The <a href="../init.tyron/">init.tyron</a> contract calls this transition to set the <em>operation_cost</em>, <em>foundation_address</em> &amp; address and commission of the given agent.</li>
<li><em>SetSsiDomain</em>: Sets a domain name for the Decentralized Identifier.</li>
<li><em>SetDomainCallBack</em>: The <a href="../init.tyron/">init.tyron</a> contract calls this transition to set a user's domain name.</li>
<li><em>DidCreate</em>: Executes a <a href="../../CRUD-operations/did-create/">DID-Create</a> tyronZIL transaction.</li>
<li><em>DidRecover</em>: Executes a <a href="../../CRUD-operations/did-recover/">DID-Recover</a> tyronZIL transaction.</li>
<li><em>DidUpdate</em>: Executes a <a href="../../CRUD-operations/did-update/">DID-Update</a> tyronZIL transaction.</li>
<li><em>DidDeactivate</em>: Executes a <a href="../../CRUD-operations/did-deactivate/">DID-Deactivate</a> tyronZIL transaction.</li>
</ol>
<h3 id="the-xwallet-transitions">The xWallet transitions</h3>
<ol>
<li><em>SsiToken</em>: To set/update a SSI Token.</li>
<li><em>SsiTokenCallBack</em>: The <a href="../init.tyron/">init.tyron</a> contract calls this transition to update a SSI Token to its latest implementation (token name, proxy address and token implementation address).</li>
<li><em>ZilIn</em>: Adds native funds (ZIL) to the xWallet.</li>
<li><em>ZilOut</em>: Sends ZIL from the xWallet to any recipient that implements the input tag (e.g. "ZilIn", "").</li>
<li>RecipientAcceptTransfer: The ZRC-2 acceptance transition - MUST be defined or transfers to this xWallet will fail otherwise.</li>
<li><em>XTransfer</em>: Transfers ZRC-2 SSI Tokens.</li>
<li><em>TransferSuccessCallBack</em>: the ZRC-2 callback transition - MUST be defined or transfers from this xWallet will fail otherwise.</li>
<li><em>Donate</em>: To initialize a donation campaign code.</li>
<li><em>DonateCallBack</em>: The <a href="../init.tyron/">init.tyron</a> contract calls this transition to save the donation campaign code into the DIDC.</li>
</ol>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../../protocol-parameters/" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Protocol parameters
              </div>
            </div>
          </a>
        
        
          <a href="../init.tyron/" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                init.tyron
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright (C) 2020 Julio Cesar Cabrapan Duarte
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
  <div class="md-footer-social">
    
      
      
        
        
      
      <a href="https://twitter.com/tyrondid" target="_blank" rel="noopener" title="twitter.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
      </a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.77e55a48.min.js"></script>
      <script src="../../assets/javascripts/bundle.9554a270.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: ['tabs'],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.4ac00218.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>